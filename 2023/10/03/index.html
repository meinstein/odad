<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="description" content="...">
    <meta name="keywords" content="visual">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>timesuck</title>
    <style>
      body {
        margin: 0;
        box-sizing: border-box;
      }

      /* slightly animate the badge */
      .badge {
        animation: badge 1s infinite alternate;
      }

      @keyframes badge {
        from {
          transform: scale(1) translate(35%, -35%);
        }

        to {
          transform: scale(1.05) translate(35%, -35%);
        }
      }

      /* animate the pill */
      .pill {
        animation: pill 1s ease-in-out infinite alternate;
      }

      @keyframes pill {
        from {
          transform: scale(1);
        }

        to {
          transform: scale(1.3);
        }
      }
    </style>
  </head>

  <body>
    <main>
      <!-- add main content here -->
    </main>
    <script>

      const main = document.querySelector('main');
      main.style.padding = '16px';
      // create a grid element with grid cols that are 25px wide and 25px high
      const grid = document.createElement('div');
      grid.style.display = 'grid';
      // make the grid have as many columns as it can fit in the main element
      grid.style.gridTemplateColumns = `repeat(auto-fit, 50px)`;
      // make the grid have as many rows as it can fit in the main element
      grid.style.gridTemplateRows = `repeat(auto-fit, 50px)`;
      // make the grid have a gap of 2px between each cell
      grid.style.gap = '8px';
      grid.style.width = '300px';
      // make the grid as tall as it needs to be to fit all the cells
      grid.style.height = '300px';
      main.appendChild(grid);


      // create 144 divs and append them to the grid
      for (let i = 0; i < 25; i++) {
        const div = document.createElement('div');
        div.style.padding = '2px';
        // add a box with rounded edges to the center of div
        const box = document.createElement('div');
        box.style.position = 'relative';
        box.style.width = '100%';
        box.style.height = '100%';
        box.style.borderRadius = '20%';
        box.style.backgroundColor = 'white';
        // apple imessage green background and shadow to the box
        box.style.background = 'linear-gradient(90deg, rgba(0,255,0,1) 0%, rgba(0,255,0,1) 50%, rgba(0,255,0,1) 100%)';
        box.style.display = 'flex';
        box.style.justifyContent = 'center';
        box.style.alignItems = 'center';
        // add pill to emoji to center of each one
        const pill = document.createElement('div');
        pill.classList.add('pill');
        pill.innerHTML = 'ðŸ’Š';
        // random animation delay
        pill.style.animationDelay = `${Math.random() * 1000}ms`;
        box.appendChild(pill);

        // absolutely position a notification badge in the top-right corner of the box
        const badge = document.createElement('div');
        badge.classList.add('badge');
        badge.style.position = 'absolute';
        badge.style.top = '0';
        badge.style.right = '0';
        // transform 50%
        badge.style.transform = 'translate(35%, -35%)';
        badge.style.width = '18px';
        badge.style.height = '18px';
        badge.style.borderRadius = '50%';
        badge.style.backgroundColor = 'red';
        // badge.style.boxShadow = '0 0 0 2px white';
        // add random number to badge
        badge.textContent = Math.floor(Math.random() * 10);
        // center the text in the badge and make it white
        badge.style.color = 'white';
        // center the text in the badge using flex
        badge.style.display = 'flex';
        badge.style.justifyContent = 'center';
        badge.style.alignItems = 'center';
        badge.style.fontSize = '12px';
        // line height same as height
        badge.style.lineHeight = '18px';
        // apply the system font
        badge.style.fontFamily = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif';
        box.appendChild(badge);
        div.appendChild(box);

        // div.setAttribute('style', 'background-color: black');
        grid.appendChild(div);

        const updateBadgeCont = (timestamp) => {
          // update the badge content
          let startNumber = 0;
          const nextNumber = Math.max(Math.floor(Math.random() * 10), 1);

          const countUp = () => {
            // if the badge content is less than the next number
            if (startNumber < nextNumber) {
              // increment the badge content by 1
              badge.textContent = parseInt(startNumber) + 1;
              // increment the start number by 1
              startNumber++;
              // call countUp again in 1 second
              setTimeout(countUp, 50);
            }
          }

          countUp();
        }

        // update the badge content every 1 second
        setInterval(updateBadgeCont, 1000);
      }
    </script>
  </body>

</html>
