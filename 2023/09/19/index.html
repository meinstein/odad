<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="description" content="...">
    <meta name="keywords" content="visual">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>same same</title>
    <style>
      body {
        margin: 0;
      }

      main {
        padding: 10px;
      }

      #outline {
        position: relative;
        width: 360px;
        height: 640px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        flex-direction: column;
        overflow: hidden;
        background-color: black;
        z-index: 0;
      }

      #notch {
        z-index: 1;
        position: absolute;
        top: 0;
        width: 140px;
        height: 24px;
        background-color: black;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
      }

      #provider {
        z-index: 1;
        position: absolute;
        top: 6px;
        left: 32px;
        width: 120px;
        height: 16px;
        font-size: 14px;
        font-weight: 500;
        color: white;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif
      }

      @keyframes slide-in {
        0% {
          transform: translateY(640px);
        }

        20% {
          transform: translateY(0);
        }

        40% {
          transform: translateY(0);
        }

        60% {
          transform: translateY(-640px);
        }

        80% {
          transform: translateY(-640px);
        }

        100% {
          transform: translateY(-640px);
        }
      }

      .slide {
        overflow: hidden;
        z-index: -1;
        position: absolute;
        transform: translateY(640px);
      }

      .gif {
        width: 360px;
        height: 640px;
        object-fit: cover;
      }

      .controls {
        position: absolute;
        top: 400px;
        right: 16px;
        color: white;
        z-index: 1;
        font-size: 36px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
    </style>
  </head>

  <body>
    <main>
      <div id="outline">
        <div id="notch"></div>
        <div id="provider">AT&T</div>
        <div class="slide">
          <img class="gif" src="./smoking.gif" />
          <div class="controls">
            <div>
              <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="1em"
                viewBox="0 0 512 512">
                <path
                  d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" />
              </svg>
            </div>
            <div>
              <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="1em"
                viewBox="0 0 512 512">
                <path
                  d="M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3 0 0 0 0 0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z" />
              </svg>
            </div>
            <div>
              <svg fill="white" xmlns="http://www.w3.org/2000/svg" height="1em"
                viewBox="0 0 512 512">
                <path
                  d="M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z" />
              </svg>
            </div>
          </div>
        </div>
      </div>
      </div>
    </main>
    <script>
      const outline = document.querySelector('#outline');

      const [firstSlide] = document.querySelectorAll('.slide');

      firstSlide.addEventListener('animationstart', (event) => {
        onAnimationStart(event)
      });

      firstSlide.addEventListener('animationend', (event) => {
        onAnimationEnd(event)
      });


      const onAnimationStart = (event) => {
        const prevSlide = event.target;
        const nextSlide = prevSlide.cloneNode(true);
        const [img] = nextSlide.children;
        const srcUrl = new URL(img.src);
        // restart the GIF with this hack
        srcUrl.searchParams.set('t', Date.now());
        img.src = srcUrl.toString();
        nextSlide.addEventListener('animationstart', onAnimationStart);
        nextSlide.addEventListener('animationend', onAnimationEnd);
        nextSlide.style.animationDelay = '1.5s';
        outline.appendChild(nextSlide);

      }

      const onAnimationEnd = (event) => {
        const prevSlide = event.target;
        prevSlide.remove();
      }


      const [firstGif] = document.querySelectorAll('.gif');

      firstGif.addEventListener('load', (event) => {
        const slide = event.target.parentElement;
        // add the animation to the slide after the img is loaded
        slide.style.animation = `slide-in 4s ease-in`;
      });

    </script>
  </body>

</html>
